---
title: "Certifications"
author: "PRG"
output: vitae::awesomecv
---

# Skills
```{r, results='asis'}
skill_data <- 
 purrr::map(unique(CV$skills$group) %>% purrr::set_names(),
      function(category){
        
    CV$skills %>%
    dplyr::mutate(skill = if_else(is.na(details) | details == "",
                           glue::glue("{skill}"),
                           glue::glue("{skill} - {details}"))) %>% 
    select(-details) %>% 
      dplyr::filter(group == category) %>% 
      tibble::deframe()
})

n_cols <- length(skill_data)
header_latex <- ifelse(n_cols == 2,
  '\n\\begin{cvskills}{p{0.4\\textwidth}p{0.4\\textwidth}}\n',
  '\n\\begin{cvskills}{p{0.33\\textwidth}p{0.33\\textwidth}p{0.33\\textwidth}}\n'
  )

header_table <- ifelse(n_cols == 2, paste0('\\textcolor{black}{\\textbf{', names(skill_data)[1], '}} & \\textcolor{black}{\\textbf{', names(skill_data)[2], '}} \\\\ \n'),
paste0('\\textcolor{black}{\\textbf{', names(skill_data)[1], '}} & \\textcolor{black}{\\textbf{', names(skill_data)[2], '}} & \\textcolor{black}{\\textbf{', names(skill_data)[3], '}} \\\\ \n')
)
end_latex <- '\n\\end{cvskills}\n'

row_number <- 0
for (group in names(skill_data)){
  row_number <- max(row_number, length(skill_data[[group]]))
}

skill_env <- paste0(header_latex,
                    header_table)

for (i in seq(1, row_number)){

  skill_row <- ifelse(n_cols == 2, 
    paste0(
    '\\cvskill{\\textcolor{black}  ',
    ifelse(class(try(skill_data[[1]][[i]], silent = TRUE)) == "try-error",
           '- ',
           paste0('{·} ', skill_data[[1]][[i]])
           ),
    '}{\\textcolor{black}  ',
    ifelse(class(try(skill_data[[2]][[i]], silent = TRUE)) == "try-error",
           '- ',
           paste0('{·} ', skill_data[[2]][[i]])
           ),
    '}\n'),
    paste0(
    '\\cvskill{\\textcolor{black} ',
    ifelse(class(try(skill_data[[1]][[i]], silent = TRUE)) == "try-error",
           '- ',
           paste0('{·} ', skill_data[[1]][[i]])
           ),
    '}{\\textcolor{black} ',
    ifelse(class(try(skill_data[[2]][[i]], silent = TRUE)) == "try-error",
           '- ',
           paste0('{·} ', skill_data[[2]][[i]])
           ),
    '}{\\textcolor{black} ',
    ifelse(class(try(skill_data[[3]][[i]], silent = TRUE)) == "try-error",
           '- ',
           paste0('{·} ', skill_data[[3]][[i]])
           ),
    '}\n')
  )
  
  skill_env <- paste0(skill_env,
                      skill_row)
}


skill_env <- paste0(skill_env,
                    end_latex)


cat(skill_env)
invisible(CV)

# needs to be redone
# cv_skill_env_prg <- "\n\\begin{cvskills}{p{0.4\\textwidth}p{0.4\\textwidth}}\n\\textcolor{black}{\\textbf{Technical}} & \\textcolor{black}{\\textbf{Language}} \\\\ \n\\cvskill{\\textcolor{black}{·} Programming - R, Python, Matlab, Bash}{\\textcolor{black}{·} English - proficient}\n\\cvskill{\\textcolor{black}{·} Machine Learning}{\\textcolor{black}{·} Danish - advanced}\n\\cvskill{\\textcolor{black}{·} Multi-Omics Integration}{\\textcolor{black}{·} Spanish - native}\n\\cvskill{\\textcolor{black}{·} Microbiome Research}{\\textcolor{black}{·} French - intermediate}\n\\cvskill{\\textcolor{black}{·} Biostatistics}{}\n\\cvskill{\\textcolor{black}{·} GitHub}{}\n\\cvskill{\\textcolor{black}{·} Software Development}{}\n\\cvskill{\\textcolor{black}{·} High Performance Computing}{}\n\\cvskill{\\textcolor{black}{·} Scientific Communication with Clients}{}\n\\end{cvskills}\n"
```
